# Docker

## **知識點與學習方向**

### 1. **Docker 網路基礎概念**

**學習方向：理解 Docker 的各種網路模式和架構本質**

- Docker 如何支持容器之間和容器與外部的通信。
- Docker 網路使用的核心技術：Bridge、NAT、虛擬網卡(`veth pair`)、內建 DNS。

### 2. **網路驅動程式（Drivers）**

**學習方向：各類網路驅動的功能、優缺點與應用場景**

- **Bridge**（預設）：學習如何使用預設橋接網路在單主機連接容器。
- **Host**：理解容器與主機網卡共用場景。
- **None**：完全孤立的網絡應用情景。
- **Overlay**：如何在 Swarm 或 K8s 下實現跨主機容器的安全通信。
- **Macvlan**：了解如何讓容器直接獲取宿主網卡 IP，適用於嵌入式場景。

### 3. **自定義網路配置**

**學習方向：設計自己的 Docker 網路**

- 如何創建自定義網路 `docker network create`。
- 指定子網（subnet）和 IP 範圍。
- 容器之間的 DNS 名稱解析與簡易通信（內建 DNS 功能）。
- 網路隔離與安全控制。

### 4. **容器與外部通信**

**學習方向：如何讓容器與外部主機、服務直接通信**

- 容器如何訪問宿主（透過 NAT 或直接連接）。
- 容器如何連接外部網絡（如 DB、REST API）。
- 如何配置宿主防火牆與流量限制，尤其對細粒度通信的需求。

### 5. **高性能場景網路模式**

**學習方向：提升網路性能，避免 NAT 的影響**

- 使用 `host` 模式，讓容器共享宿主 IP（適合高效需求，如遊戲伺服器）。
- 使用 `Macvlan` 模式，讓容器模擬物理設備，直接分配宿主網卡 IP。

### 6. **跨主機網路**

**學習方向：實現多主機之間容器直接通訊**

- 使用 `overlay` 網路模式，跨主機容器進行通訊。
- Docker Swarm、Kubernetes 的網路管理。
- 使用網路插件如 Weave、Flannel 等實現複雜網路拓撲。

### 7. **網路監控與故障排除**

**學習方向：診斷與排查容器網路問題**

- 常用工具：
  - 使用 `docker network inspect` 查看網路詳情。
  - 使用 `ping`、`telnet` 或 `curl` 測試容器之間的可達性。
  - 使用 `tcpdump`、`Wireshark` 分析數據包。
- 查看主機的 `iptables` 規則，檢查是否有網路阻斷問題。

---
